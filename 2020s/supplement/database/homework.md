# データベース課題

　演習でSQLの書き方を学んだと思うので宿題ではその前段階のデータ型や列制約を決めることを行いたいと思います。  
これから成果物を作るにあたって、データベースを使用する学生は多いと思います。今のうちに軽く練習しましょう。

## 課題

　次の図を見て、2つのテーブルを作成せよ。
ただし、データ型及び列制約は自分で考察すること。  
また、各名称を英語で記載すること。  
<br>
<img width="500" alt="illust1" src="https://github.com/Cist-ProjectMember/ProjectMemberDocuments/blob/master/2020s/supplement/database/image/%E5%9B%B310%20(2).png">

図1．販売管理システムのE-R図

## 解答

　データベースはどれが正しいなどは決めづらいのであくまで例として参考にしてください。
```sql
# 解答例
#顧客テーブル
CREATE TABLE CLIENT(
     CUST_ID varchar(16) PRIMARY KEY,
     CUST_NAME varchar(32),
     ACCOUNT_REPRESENTATIVE varchar(32)
     ACCOUNT_EXECUTIVE varchar(4),
     CUST_ADDRESS varchar(4)
 );
```

## 解説 

### データ型

　データ型は宗教問題になりかねになりかねないので、あくまで例として確認ください。  
講習会でも説明した通り、データ型は大きく分けて以下のように区別することができます。 
<br>
<img width="500" alt="illust1" src="https://github.com/Cist-ProjectMember/ProjectMemberDocuments/blob/master/2020s/supplement/database/image/%E5%9B%B33.png">

　今回はこの図に書かれている型のみで作ります。  
これ以外のH2DBのデータ型について知りたい方は[こちら](http://www.h2database.com/html/datatypes.html)を参考にしてください。  
今回の課題で悩むカラムは「請求書番号」「顧客番号」の番号関連、「請求日」「形状年月」の日付関連の2点だと思います。  

　まずは番号について、番号は学籍番号のように「b21○○○○○」のように数字以外の文字を使うことがよくあります。  
今回は指定がなかったため、おそらく"INTEGER"などを使用した学生もいるかと思います。  
どちらが正しいなどはないですが、"CHAR"を使うことがあることも覚えておきましょう。  

　次に日付関連です。日付や時刻には"DATETIME", "DATE", "TIME"など数多くの方が存在します。  
最初のころは、時間は"TIME"・日付は"DATE"・日時は"DATETIME"と覚えていただいていいと思います。  
今回は「請求日」と「計上年月」の2点でどちらも日付なので"DATE"が適切だと思います。  
<br>
※詳しくは書きませんが"DATETIME"もありです。これは題材が悪かったためそれにする気持ちもわかります。

### 列制約

　今回の問題では、主キー(PRIMARY KEY)と外部キー(FOREIGN KEY)を用います。  
この2つはどんなデータベースを作る場合でも必須になるほど重要なものですので、  
すぐに見極められるようになりましょう。  

　この二つの制約を使う際に注意してほしい点はどちらに矢印が向いているかです。  
2つのテーブルを作る際には、矢印が出ている（向いていない）テーブルから作るのが基本です。  
今回の問題では、「顧客テーブル」から「請求テーブル」に矢印が向いているので、まずは「顧客テーブル」から作るようにしてください。  

　次に外部キーの見つけ方ですがこれはとても簡単です。  
2つのテーブルに共通するカラムがあれば、それが外部キーおよび主キーとなります。  
今回の問題では「顧客番号」がどちらも含まれていますので、  
「請求テーブル」の「顧客番号」が外部キー、「顧客テーブル」の「顧客番号」が主キーとなります。  

　最後に主キーの見つけ方です。主キーは内容が被ることなく、nullにもならないカラムでなければいけません。  
"テーブル名_ID"という言葉で主キーを意図的に作ることがあります。  
今回の問題では「請求番号」がそれにあたります。  

## 余談
### 余談①

　これは応用情報技術者試験の問題を基に作成しています。  
応用情報技術者試験のほかに、「基本情報技術者試験」「ITパスポート」などの学生向けの資格があります。
[![](https://github.com/Cist-ProjectMember/ProjectMemberDocuments/blob/master/2020s/supplement/database/image/%E5%9B%B311.png)](https://www.jitec.ipa.go.jp/1_11seido/seido_gaiyo.html)  

　自宅にいる時間が多い今だからこそ、何か新しい資格を取ってみてはいかがでしょうか？  
気になる方がいましたら、[こちら](https://www.jitec.ipa.go.jp/1_11seido/seido_gaiyo.html)が公式サイトとなります。

### 余談②

　今度データベースを扱うにあたってJDBCを使用することが増えてくると思います。  
JDBCはJava側からデータベースを操作するためのものであり、  
これからは今回の講習のようにコンソールを直接いじってデータを追加することはなかなかありません。  
ぜひJSBCも使えられるようになりましょう。
